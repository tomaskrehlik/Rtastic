      <h1>Component+Residual (Partial Residual) Plots</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><span class="functioncall"><a href='crPlots.html'>crPlots</a></span><span class="keyword">(</span><span class="symbol">model</span><span class="keyword">,</span> <span class="argument">terms</span> <span class="argument">=</span> <span class="keyword">~</span><span class="symbol">.</span><span class="keyword">,</span> <span class="argument">layout</span> <span class="argument">=</span> NULL<span class="keyword">,</span> <span class="symbol">ask</span><span class="keyword">,</span> <span class="symbol">main</span><span class="keyword">,</span> <span class="symbol">...</span><span class="keyword">)</span>

<span class="functioncall"><a href='crPlots.html'>crp</a></span><span class="keyword">(</span><span class="symbol">...</span><span class="keyword">)</span>

<span class="functioncall"><a href='crPlots.html'>crPlot</a></span><span class="keyword">(</span><span class="symbol">model</span><span class="keyword">,</span> <span class="symbol">...</span><span class="keyword">)</span>

<span class="functioncall"><a href='crPlots.html'>crPlot</a></span><span class="keyword">(</span><span class="symbol">model</span><span class="keyword">,</span> <span class="symbol">variable</span><span class="keyword">,</span> <span class="argument">id.method</span> <span class="argument">=</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/list'>list</a></span><span class="keyword">(</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/MathFun'>abs</a></span><span class="keyword">(</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/residuals'>residuals</a></span><span class="keyword">(</span><span class="symbol">model</span><span class="keyword">,</span> <span class="argument">type</span> <span class="argument">=</span> <span class="string">"pearson"</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">,</span>
  <span class="string">"x"</span><span class="keyword">)</span><span class="keyword">,</span> <span class="symbol">labels</span><span class="keyword">,</span> <span class="argument">id.n</span> <span class="argument">=</span> <span class="keyword">if</span> <span class="keyword">(</span><span class="symbol">id.method</span><span class="keyword">[</span><span class="number">1</span><span class="keyword">]</span> == <span class="string">"identify"</span><span class="keyword">)</span> <span class="number">Inf</span> <span class="keyword">else</span> <span class="number">0</span><span class="keyword">,</span> <span class="argument">id.cex</span> <span class="argument">=</span> <span class="number">1</span><span class="keyword">,</span>
      <span class="argument">id.col</span> <span class="argument">=</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/grDevices/palette'>palette</a></span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">[</span><span class="number">1</span><span class="keyword">]</span><span class="keyword">,</span> <span class="argument">order</span> <span class="argument">=</span> <span class="number">1</span><span class="keyword">,</span> <span class="argument">line</span> <span class="argument">=</span> <span class="number">TRUE</span><span class="keyword">,</span> <span class="argument">smoother</span> <span class="argument">=</span> <span class="symbol">loessLine</span><span class="keyword">,</span> <span class="argument">smoother.args</span> <span class="argument">=</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/list'>list</a></span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span>
      <span class="symbol">smooth</span><span class="keyword">,</span> <span class="symbol">span</span><span class="keyword">,</span> <span class="argument">col</span> <span class="argument">=</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/grDevices/palette'>palette</a></span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">[</span><span class="number">1</span><span class="keyword">]</span><span class="keyword">,</span> <span class="argument">col.lines</span> <span class="argument">=</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/grDevices/palette'>palette</a></span><span class="keyword">(</span><span class="keyword">)</span><span class="keyword">[</span><span class="keyword">-</span><span class="number">1</span><span class="keyword">]</span><span class="keyword">,</span> <span class="symbol">xlab</span><span class="keyword">,</span> <span class="symbol">ylab</span><span class="keyword">,</span> <span class="argument">pch</span> <span class="argument">=</span> <span class="number">1</span><span class="keyword">,</span>
      <span class="argument">lwd</span> <span class="argument">=</span> <span class="number">2</span><span class="keyword">,</span> <span class="argument">grid</span> <span class="argument">=</span> <span class="number">TRUE</span><span class="keyword">,</span> <span class="symbol">...</span><span class="keyword">)</span>

<span class="functioncall"><a href='crPlots.html'>crPlot</a></span><span class="keyword">(</span><span class="symbol">model</span><span class="keyword">,</span> <span class="symbol">...</span><span class="keyword">)</span></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>model</dt>
      <dd>model object produced by <code>lm</code> or <code>glm</code>.</dd>
      <dt>terms</dt>
      <dd> A one-sided formula that specifies a subset of the predictors. 
One component-plus-residual plot is drawn for each term.  The default
<code>~.</code> is to plot against all numeric predictors.  For example, the
specification <code>terms = ~ . - X3</code> would plot against all predictors
except for <code>X3</code>.  If this argument is a quoted name of one of the predictors, the 
component-plus-residual plot is drawn for that predictor only.
</dd>
      <dt>layout</dt>
      <dd> 
If set to a value like <code>c(1, 1)</code> or <code>c(4, 3)</code>, the layout
of the graph will have this many rows and columns.  If not set, the program
will select an appropriate layout.  If the number of graphs exceed nine, you 
must select the layout yourself, or you will get a maximum of nine per page.
If <code>layout=NA</code>, the function does not set the layout and the user can
use the <code>par</code> function to control the layout, for example to have 
plots from two models in the same graphics window.
</dd>
      <dt>ask</dt>
      <dd>If <code>TRUE</code>, ask the user before drawing the next plot; if <code>FALSE</code>, the default,  don't ask.
This is relevant only if not all the graphs can be drawn in one window.</dd>
      <dt>main</dt>
      <dd>The title of the plot; if missing, one will be supplied.</dd>
      <dt>...</dt>
      <dd><code>crPlots</code> passes these arguments to <code>crPlot</code>.  
<code>crPlot</code> passes them to <code>plot</code>. 
</dd>
      <dt>variable</dt>
      <dd>A quoted string giving the name of a variable for the horizontal
axis
</dd>
      <dt>id.method,labels,id.n,id.cex,id.col</dt>
      <dd>Arguments for the labelling of
    points.  The default is <code>id.n=0</code> for labeling no points.  See
    <code><a href='showLabels.html'>showLabels</a></code> for details of these arguments.
</dd>
      <dt>order</dt>
      <dd>order of polynomial regression performed for predictor to be plotted; default <code>1</code>.</dd>
      <dt>line</dt>
      <dd><code>TRUE</code> to plot least-squares line.</dd>
      <dt>smoother</dt>
      <dd>Function to add a nonparametric smooth.
</dd>
      <dt>smoother.args</dt>
      <dd>see <code><a href='ScatterplotSmoothers.html'>ScatterplotSmoothers</a></code> for available
  smooethers and arguments.
</dd>
      <dt>smooth, span</dt>
      <dd>these arguments are included for backwards compatility: 
    if <code>smooth=TRUE</code> then <code>smoother</code> is set to <code>loessLine</code>,
    and if <code>span</code> is specified, it is added to <code>smoother.args</code>.</dd>
      <dt>col</dt>
      <dd>color for points; the default is the first entry
    in the current color palette (see <code><a href='http://www.inside-r.org/r-doc/grDevices/palette'>palette</a></code>
    and <code><a href='http://www.inside-r.org/r-doc/graphics/par'>par</a></code>).</dd>
      <dt>col.lines</dt>
      <dd>a list of at least two colors.  The first color is used for the
    ls line and the second color is used for the fitted lowess line.  To use
    the same color for both, use, for example, <code>col.lines=c("red", "red")</code></dd>
      <dt>xlab,ylab</dt>
      <dd>labels for the x and y axes, respectively.  If not set 
    appropriate labels are created by the function.</dd>
      <dt>pch</dt>
      <dd>plotting character for points; default is <code>1</code> 
    (a circle, see <code><a href='http://www.inside-r.org/r-doc/graphics/par'>par</a></code>).</dd>
      <dt>lwd</dt>
      <dd>line width; default is <code>2</code> (see <code><a href='http://www.inside-r.org/r-doc/graphics/par'>par</a></code>).</dd>
      <dt>grid</dt>
      <dd>If TRUE, the default, a light-gray background grid is put on the
graph</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>
      
      <p>These functions construct component+residual plots (also called
  partial-residual plots) for linear and generalized linear models.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>
      
      <p>The function intended for direct use is <code>crPlots</code>, for which <code>crp</code>
  is an abbreviation.</p>
  
      <p>The model cannot contain interactions, but can contain factors. 
  Parallel boxplots of the partial residuals are drawn for the levels
  of a factor.</p>
  
    </div>

    <div class="Value">
      <h2>Value</h2>
      
      <p><code>NULL</code>. These functions are used for their side effect of producing
  plots.</p>
  
    </div>

    <div class="References">
      <h2>References</h2>
      
      <p>Cook, R. D. and Weisberg, S. (1999)
  <em>Applied Regression, Including Computing and Graphics.</em> Wiley.</p>
  
      <p>Fox, J. (2008)
  <em>Applied Regression Analysis and Generalized Linear Models</em>,
  Second Edition. Sage.</p>
  
      <p>Fox, J. and Weisberg, S. (2011) 
  <em>An R Companion to Applied Regression</em>, Second Edition, Sage.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'><span class="functioncall"><a href='crPlots.html'>crPlots</a></span><span class="keyword">(</span><span class="symbol">m</span><span class="assignement">&lt;-</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/lm'>lm</a></span><span class="keyword">(</span><span class="symbol">prestige</span><span class="keyword">~</span><span class="symbol">income</span><span class="keyword">+</span><span class="symbol">education</span><span class="keyword">,</span> <span class="argument">data</span><span class="argument">=</span><span class="symbol">Prestige</span><span class="keyword">)</span><span class="keyword">)</span></div>
<p><img src='crPlots-2.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-3.png' alt='' width='400' height='400' /></p>
<div class='input'><span class="comment"># get only one plot</span>
<span class="functioncall"><a href='crPlots.html'>crPlots</a></span><span class="keyword">(</span><span class="symbol">m</span><span class="keyword">,</span> <span class="argument">terms</span><span class="argument">=</span><span class="keyword">~</span> <span class="symbol">.</span> <span class="keyword">-</span> <span class="symbol">education</span><span class="keyword">)</span></div>
<p><img src='crPlots-5.png' alt='' width='400' height='400' /></p>
<div class='input'>
<span class="functioncall"><a href='crPlots.html'>crPlots</a></span><span class="keyword">(</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/lm'>lm</a></span><span class="keyword">(</span><span class="symbol">prestige</span> <span class="keyword">~</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Log'>log2</a></span><span class="keyword">(</span><span class="symbol">income</span><span class="keyword">)</span> <span class="keyword">+</span> <span class="symbol">education</span> <span class="keyword">+</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/poly'>poly</a></span><span class="keyword">(</span><span class="symbol">women</span><span class="keyword">,</span><span class="number">2</span><span class="keyword">)</span><span class="keyword">,</span> <span class="argument">data</span><span class="argument">=</span><span class="symbol">Prestige</span><span class="keyword">)</span><span class="keyword">)</span></div>
<p><img src='crPlots-7.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-8.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-9.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-10.png' alt='' width='400' height='400' /></p>
<div class='input'>
<span class="functioncall"><a href='crPlots.html'>crPlots</a></span><span class="keyword">(</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/glm'>glm</a></span><span class="keyword">(</span><span class="symbol">partic</span> <span class="keyword">!=</span> <span class="string">"not.work"</span> <span class="keyword">~</span> <span class="symbol">hincome</span> <span class="keyword">+</span> <span class="symbol">children</span><span class="keyword">,</span>
  <span class="argument">data</span><span class="argument">=</span><span class="symbol">Womenlf</span><span class="keyword">,</span> <span class="argument">family</span><span class="argument">=</span><span class="symbol">binomial</span><span class="keyword">)</span><span class="keyword">)</span></div>
<p><img src='crPlots-12.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-13.png' alt='' width='400' height='400' /></p>
<p><img src='crPlots-14.png' alt='' width='400' height='400' /></p></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>crPlots</li><li>crp</li><li>crPlot</li><li>crPlot.lm</li><li>crPlot.glm</li>
    </ul>
    <ul>
      <li>hplot</li><li>regression</li>
    </ul> -->
      
    <h2>See also</h2>
    <code><a href='ceresPlots.html'>ceresPlots</a></code>, <code><a href='avPlots.html'>avPlots</a></code>
    
    <h2>Author</h2>
    John Fox <a href='mailto:jfox@mcmaster.ca'>jfox@mcmaster.ca</a>
    
  </div>
</div>